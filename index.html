<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>üîí T√©l√©phone pirat√©</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background-color: black;
      color: red;
      font-family: monospace;
      text-align: center;
      height: 100%;
      overflow: hidden;
    }
    #message {
      background-color: #220000;
      color: orange;
      padding: 15px;
      font-size: 18px;
    }
    #container {
      padding-top: 20px;
    }
    video {
      margin-top: 20px;
      width: 80%;
      border: 5px solid red;
    }
    h1 {
      margin-top: 40px;
      font-size: 28px;
    }
    p {
      font-size: 20px;
    }
  </style>
</head>
<body oncontextmenu="return false" onkeydown="return false" onmousedown="return false">
  <div id="message">
    üîí Ce syst√®me est en mode d√©fense.<br>
    Veuillez autoriser la cam√©ra pour finaliser l‚Äôanalyse de s√©curit√©.<br>
    Refuser l‚Äôacc√®s peut entra√Æner un formatage automatique.
  </div>

  <div id="container">
    <h1>‚ö†Ô∏è T√âL√âPHONE PIRAT√â ‚ö†Ô∏è</h1>
    <p>Formatage automatique dans : <span id="timer">120</span> secondes</p>
    <p>Cam√©ra activ√©e. Enregistrement en cours...</p>
    <video id="video" autoplay muted playsinline></video>
  </div>

  <!-- üîä Alarme en boucle -->
  <audio id="alarme" autoplay loop>
    <source src="alarm.mp3" type="audio/mpeg">
    Votre navigateur ne supporte pas l‚Äôaudio.
  </audio>

  <script>
    // Emp√™che touches et clics
    document.addEventListener("keydown", e => e.preventDefault());
    document.addEventListener("touchstart", e => e.preventDefault(), { passive: false });

    // Plein √©cran
    function openFullscreen() {
      const docElm = document.documentElement;
      if (docElm.requestFullscreen) docElm.requestFullscreen();
      else if (docElm.webkitRequestFullscreen) docElm.webkitRequestFullscreen();
      else if (docElm.msRequestFullscreen) docElm.msRequestFullscreen();
    }
    openFullscreen();

    // Synth√®se vocale
    const voix = new SpeechSynthesisUtterance("T√©l√©phone pirat√©. Cam√©ra activ√©e. Formatage dans deux minutes.");
    voix.lang = "fr-FR";
    voix.rate = 0.9;
    speechSynthesis.speak(voix);

    // Cam√©ra
    const video = document.getElementById('video');
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
        video.srcObject = stream;
      })
      .catch(error => {
        document.getElementById("message").innerHTML = "‚ùå Cam√©ra non autoris√©e. Formatage forc√© dans 2 minutes.";
      });

    // Compte √† rebours
    let temps = 120;
    const timer = document.getElementById("timer");
    const interval = setInterval(() => {
      temps--;
      timer.innerText = temps;
      if (temps <= 0) {
        clearInterval(interval);
        document.body.innerHTML = "<h1 style='color:lime;'>‚úÖ Formatage annul√©</h1>";
        speechSynthesis.speak(new SpeechSynthesisUtterance("Formatage annul√©. Le syst√®me est sauf."));
        document.getElementById("alarme").pause();
      }
    }, 1000);
  </script>
</body>
</html>